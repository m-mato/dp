%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% I, the copyright holder of this work, release this work into the
%% public domain. This applies worldwide. In some countries this may
%% not be legally possible; if so: I grant anyone the right to use
%% this work for any purpose, without any conditions, unless such
%% conditions are required by law.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[
  printed, %% This option enables the default options for the
           %% printed version of a document. Replace with `digital`
           %% to enable the default options for the digital version
           %% of a document.
  table,   %% Causes the coloring of tables. Replace with `notable`
           %% to restore plain tables.
  lof,     %% Prints the List of Figures. Replace with `nolof` to
           %% hide the List of Figures.
  lot,     %% Prints the List of Tables. Replace with `nolot` to
           %% hide the List of Tables.
  %% More options are listed in the user guide at
  %% <http://mirrors.ctan.org/macros/latex/contrib/fithesis/guide/mu/fi.pdf>.
]{fithesis3}

%% The following section sets up the locales used in the thesis.
\usepackage[
  main=slovak, %% By using `czech` or `slovak` as the main locale
               %% instead of `english`, you can typeset the thesis
               %% in either Czech or Slovak, respectively.
  slovak, english %% The additional keys allow
]{babel}          %% foreign texts to be typeset as follows:
				  %%  \begin{otherlanguage}{english}  ... \end{otherlanguage}

\usepackage{paratype}

%% The following section sets up the metadata of the thesis.
\thesissetup{
    date          = \the\year/\the\month/\the\day,
    university    = mu,
    faculty       = fi,
    type          = mgr,
    author        = Matej Majdiš,
    gender        = m,
    advisor       = doc. RNDr. Vlastislav Dohnal\, Ph.D.
    title         = {Rozpoznanie užívateľa na základe informácií o HTTP komunikácií},
    TeXtitle      = {Rozpoznanie užívateľa na základe informácií o HTTP komunikácií},
    keywords      = {keyword1, keyword2, ...},
    TeXkeywords   = {keyword1, keyword2, \ldots},
}

\thesislong{abstract}{
	TODO

}

\thesislong{thanks}{
	TODO
}

%% The following section sets up the bibliography.
\usepackage{csquotes}
\usepackage[              %% When typesetting the bibliography, the
  backend=biber,          %% `numeric` style will be used for the
  style=numeric,          %% entries and the `numeric-comp` style
  citestyle=numeric-comp, %% for the references to the entries. The
  sorting=none,           %% entries will be sorted in cite order.
  sortlocale=auto         %% For more unformation about the available
]{biblatex}               %% `style`s and `citestyles`, see:
%% <http://mirrors.ctan.org/macros/latex/contrib/biblatex/doc/biblatex.pdf>.
\addbibresource{example.bib} %% The bibliograpic database within
                          %% the file `example.bib` will be used.
                          
\usepackage{makeidx}      %% The `makeidx` package contains
\makeindex                %% helper commands for index typesetting.

%% These additional packages are used within the document:
\usepackage{paralist}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{url}
\usepackage{menukeys}
\usepackage{float}
\usepackage[plainpages=false, pdfpagelabels]{hyperref}

\begin{document}

\chapter{Úvod}
Problematika jednoznačnej identifikácie používateľa je dnes veľmi
dôležitou a riešenou témou. Jedným z hlavných dôvodov je fakt, že väčšina
dnešných existujúcich, prípadne novo vznikajúcich systémov a aplikácií je
nejakým spôsobom zapojená do Internetu. Zároveň zaznamenávame nárast
aplikácií, ktoré poskytujú užívateľom webové rozhranie a ústup takzvaných
desktopových aplikácií.

\begin{figure}[h]
  \centering
    \includegraphics[width=.80\textwidth]{images/web-vs-desktop.png}
  \caption{Vizualizácia pomeru počtu užívateľov webových a desktopových
  aplikácií v čase, zdroj: vlastné spracovanie}
  \label{fig:web-vs-desktop}
\end{figure}

	Z tohto vyplýva potreba rozoznania a identifikácie používateľov, ktorý s
danou aplikáciou interagujú. Existuje niekoľko rôznych prístupov k 
identifikácií, od mapovania IP adries sieťovej vrstvy až po aplikačnú správu
užívateľských účtov. Podrobne sa nimi zaoberá kapitola \ref{ch:existing}.
Cieľom tejto práce je vytvoriť unikátny identifikátor na základe informácií
dostupných z \textit{HTTP} protokolu. Pred zostavením samotného algoritmu je
preto dôležité popísať niektoré kľúčové oblasti a postupy.

Nasledujúce kapitoly sa preto budú stručne zaoberať fungovaním aplikácií typu
klient-server, modelom sieťových vrstiev či útokmi typu \textit{Denial of
Service}. Ďalej v práci popíšem spomínané existujúce prístupy a vlastný návrh
algoritmu identifikácie užívateľa. 

\section{Aplikácie typu Klient-Server}
	S pokračujúcim vývojom nových technológií sa Web stáva stále väčšou
súčasťou našich životov. Web taktiež už nie je limitovaný prehliadaním na
počítačoch. Musí sa prispôsobovať rôznym novým technológiám, ako sú napríklad
mobilné, či iné zriadenia. Najčastejšie používaným modelom komunikácie pre
architektúru webových aplikácií je tzv. Klient-Server model. Základnou
myšlienkou tohto modelu je zaslanie požiadavku (\textit{requestu}) klientom na
server, ktorý vystupuje ako poskytovateľ služby.

\begin{figure}[h]
  \centering
    \includegraphics[width=.99\textwidth]{images/C-S-basic.png}
  \caption{Schéma znázorňuje základnú architektúru modelu Klient-Server, zdroj:
  vlastné spracovanie}
  \label{fig:cs-basic}
\end{figure}

\subsection{Klient-Server model}
Pretože Klient-Server model je používaný rôznymi typmi aplikácií bolo nutné
použiť štandardizované protokoly, na základe ktorý ch bude možné komunikovať.
Základné používané protokoly sú: \textit{FTP (File Transfer Protocol)},
\textit{Simple Mail Transfer Protocol (SMTP)} a \textit{Hypertext Transfer
Protocol (HTTP)}. Bližšie sieťové vrstvy a jednotlivé protokoly popisuje
kapitola \ref{ch:net-layers}.

\subsection{Architektúra}
Architektúra modelu Klient-Server sa vo všeobecnosti typicky skladá z troch 
častí:
\begin{itemize}
	\item Aplikačný server
	\item Databázový server
	\item Zariadenie klienta
\end{itemize}
Zároveň Existujú dva základné typy architektúr: 
\begin{itemize}
	\item 2-stupňová \textit{(2-tier)}
	\item 3-stupňová \textit{(3-tier)}
\end{itemize}

\textit{2-tier} architektúra zahrna len zariadenie klienta a databázový server.
U tohoto typu architektúry je aplikácia spustená na zariadení klienta, ktoré sa
následne pripája priamo na server. Zariadenie tak obsluhuje zároveň
\textit{business} logiku aj zobrazovanie aplikácie. Inak tento typ architektúry
nazývame aj tučný klient(\textit{thick client}).

\begin{figure}[H]
  \centering
    \includegraphics[width=\textwidth]{images/C-S-thick.png}
  \caption{Grafické znázornenie a popis priebehu komunikácie 2-tier architektúry,
  zdroj: vlastné spracovanie}
  \label{fig:cs-thick}
\end{figure}

\textit{3-tier} architektúra, ktorou sa budem zaoberať v tejto práci sa od
\textit{2-tier} líši najmätým, že okrem zariadenia klienta a databázového servera
zahŕňa aj aplikačný server. Tento je následne používaný na obsluhu
\textit{business} logiky aplikácie a komunikáciu s databázou, pričom zariadenie
klienta slúž len na zobrazovanie. Iný názov pre takýto typ architektúry je tenký
klient (\textit{thincient}).

\begin{figure}[H]
  \centering
    \includegraphics[width=\textwidth]{images/C-S-thin.png}
  \caption{Grafické znázornenie a popis priebehu komunikácie 3-tier architektúry,
  zdroj: vlastné spracovanie}
  \label{fig:cs-thin}
\end{figure}

Nasledujúce kapitoly tejto práce sa budú zaoberať jedným z najdôležitejších
problémov Webových aplikácií, ktorým je identifikácia užívateľa. Najskôr kapitola
\ref{ch:net-layers} analyzuje jednotlivé sieťové vrstvy a protokoly, ktorých
informácie je možné použiť ka následnej identifikácií. Ďalšou časťou je zhrnutie
existujúcich prístupov k rozoznaniu užívateľov v kapitole \ref{ch:existing} a 
popis útokov typu DOS v kapitole \ref{ch:dos}. Najdôležitejšou časťou je však
samozrejme kapitola \ref{ch:footprint}, ktorá popisuje návrh samotného 
algoritmu identifikátoru.

\chapter{Analýza sieťových vrstiev a protokolov}
\label{ch:net-layers}
//TODO - Úvod
\section{Aplikačná vrstva}
\section{Transportná vrstva}
\section{Sieťová vrstva}
\section{Vrstva sieťového rozhrania}

\chapter{Útoky typu \textit{Denial of Service}}
\label{ch:dos}
Jedným z hlavných dôvodov identifikácie užívateľov je prevencia proti útokom. Medzi
najznámejšie z útokov patrí tzv. Denial of Service, ďalej len DoS.

Vo všeobecnosti je za DoS útok považovaná snaha utočníka zabrániť oprávneným
užívateľom v prístupe k informáciám, prípadne službám poskytovateľa. Snahou útočníka
je znefunkčnit pripojenie neustálym narušaním služby serveru, prípadne sieťovej
infraštruktúry, v dôsledku čoho môze dôjsť k čiastočnej, či úplnej strate
internetového pripojenia hostiteľa. 

U distribuovaného DoS útoku (alej len DDoS) môže útočník použiť k útoku na server
počítače klientov. Nad týmito zariadeniami je možné prevziať kontrolu využitím
bezpečnostných chýb alebo nedostatkov. Takto je následne možné donútiť počítač
posielať obrovské množstvo dát na webové servery, prípadne odosielanie nevyžiadanej
pošty na konkrétne e-mailové adresy. Útok sa nazýva "distribuovaný", pretože útočník
používa viac zariadení na začatie útoku denial-of-service.

DoS útok je podobny veľkej skupine ľudí, ktorá sa zhromažďuje pri vstupe do obchodu a
bráni vo vstupe skutočným zákazníkom, ktrých záujmom sú reálne služby.
Utočníci vykonávajúci tieto útoky sa často zameriavajú na webové sluzby a servery,
ktoré su poskytované vysoko profitujúcimi inštitúciami, ako sú napríklad banky,
prípadne platobné brány.

---

DOS - diagram

---

\section{Základne typy a techniky}
Nasledujúce odseky popisuju najpoužívanejšie typy a techniky vykonávania DoS útokov a
identifikujú prostriedky, ktorými je im možné zabrániť.

\subsection{Distribuované DoS útoky}
% A distributed denial-of-service (DDoS) attack occurs when multiple systems flood the bandwidth or resources of a targeted system, usually one or more web servers. Such an attack is often the result of multiple compromised systems (for example, a botnet) flooding the targeted system with traffic. A botnet is a network of zombie computers programmed to receive commands without the owners' knowledge. When a server is overloaded with connections, new connections can no longer be accepted. The major advantages to an attacker of using a distributed denial-of-service attack are that multiple machines can generate more attack traffic than one machine, multiple attack machines are harder to turn off than one attack machine, and that the behavior of each attack machine can be stealthier, making it harder to track and shut down. These attacker advantages cause challenges for defense mechanisms. For example, merely purchasing more incoming bandwidth than the current volume of the attack might not help, because the attacker might be able to simply add more attack machines. This, after all, will end up completely crashing a website for periods of time.

% Malware can carry DDoS attack mechanisms; one of the better-known examples of this was MyDoom. Its DoS mechanism was triggered on a specific date and time. This type of DDoS involved hardcoding the target IP address prior to release of the malware and no further interaction was necessary to launch the attack.

% A system may also be compromised with a trojan, allowing the attacker to download a zombie agent, or the trojan may contain one. Attackers can also break into systems using automated tools that exploit flaws in programs that listen for connections from remote hosts. This scenario primarily concerns systems acting as servers on the web. Stacheldraht is a classic example of a DDoS tool. It utilizes a layered structure where the attacker uses a client program to connect to handlers, which are compromised systems that issue commands to the zombie agents, which in turn facilitate the DDoS attack. Agents are compromised via the handlers by the attacker, using automated routines to exploit vulnerabilities in programs that accept remote connections running on the targeted remote hosts. Each handler can control up to a thousand agents. In some cases a machine may become part of a DDoS attack with the owner's consent, for example, in Operation Payback, organized by the group Anonymous. These attacks can use different types of internet packets such as: TCP, UDP, ICMP etc.

% These collections of systems compromisers are known as botnets / rootservers. DDoS tools like Stacheldraht still use classic DoS attack methods centered on IP spoofing and amplification like smurf attacks and fraggle attacks (these are also known as bandwidth consumption attacks). SYN floods (also known as resource starvation attacks) may also be used. Newer tools can use DNS servers for DoS purposes. Unlike MyDoom's DDoS mechanism, botnets can be turned against any IP address. Script kiddies use them to deny the availability of well known websites to legitimate users. More sophisticated attackers use DDoS tools for the purposes of extortion – even against their business rivals.

% Simple attacks such as SYN floods may appear with a wide range of source IP addresses, giving the appearance of a well distributed DoS. These flood attacks do not require completion of the TCP three way handshake and attempt to exhaust the destination SYN queue or the server bandwidth. Because the source IP addresses can be trivially spoofed, an attack could come from a limited set of sources, or may even originate from a single host. Stack enhancements such as syn cookies may be effective mitigation against SYN queue flooding, however complete bandwidth exhaustion may require involvement.

% If an attacker mounts an attack from a single host it would be classified as a DoS attack. In fact, any attack against availability would be classed as a denial-of-service attack. On the other hand, if an attacker uses many systems to simultaneously launch attacks against a remote host, this would be classified as a DDoS attack.

% It has been reported that there are new attacks from internet of things which have been involved in denial of service attacks. In one noted attack that was made peaked at around 20,000 requests per second which came from around 900 CCTV cameras.

---

D-DOS - diagram

---

\subsection{Sémantické DoS útoky}
% Semantic attacks exploit a specific feature or implementation
% bug of some protocol or application installed at the victim
% in order to consume excess amounts of its resources. For
% example, in the TCP SYN attack, the exploited feature is
% the allocation of substantial space in a connection queue immediately
% upon receipt of a TCP SYN request. The attacker
% initiates multiple connections that are never completed, thus
% filling up the connection queue. In the CGI request attack,
% the attacker consumes the CPU time of the victim by issuing
% multiple CGI requests. The NAPTHA [61] attack is an
% especially powerful attack on the TCP protocol. It initiates
% and establishes numerous TCP connections that consume
% the connection queue at the victim. NAPTHA bypasses the
% TCP protocol stack on the agent machine, not keeping the
% state for connections it originates. Instead, it participates
% in the connection, inferring reply attributes from received
% packets. Thus even a poorly provisioned agent machine can
% easily deplete the resources of better provisioned victim.

\subsection{Útoky hrubou silou}
% Brute-force attacks are performed by initiating a vast amount
% of seemingly legitimate transactions. Since an intermediate
% network can usually deliver higher traffic volume than the
% victim network can handle, a high number of attack packets
% exhausts the victim’s resources.
% There is a thin line between semantic and brute-force attacks.
% Semantic attacks also overwhelm a victim’s resources
% with excess traffic, and badly designed protocol features at
% remote hosts are frequently used to perform reflector bruteforce
% attacks, such as the DNS request attack [15] or the
% Smurf attack [19]. The difference is that the victim can usually
% substantially mitigate the effect of semantic attacks by
% modifying the misused protocols or deploying filters. However,
% it is helpless against brute-force attacks due to their
% misuse of legitimate services (filtering attempts also harm
% legitimate traffic) or due to its own limited resources (a
% victim cannot handle an attack that swamps its network
% bandwidth). Countering semantic attacks by modifying the
% deployed protocol or application pushes the corresponding
% attack mechanism into the brute-force category. For example,
% if the victim deploys TCP SYN cookies [20] to combat
% TCP SYN attacks, it will still be vulnerable to TCP SYN
% attacks that generate more requests than its network can
% accommodate. Classification of the specific attack needs to
% take into account both the attack mechanisms used, and the
% victim’s configuration and deployed protocols.
% It should be noted that brute-force attacks need to generate
% a much higher volume of attack packets than semantic
% attacks to inflict damage to the victim. So by modifying the
% deployed protocols, the victim pushes its vulnerability limit
% higher. It is also interesting to note that the variability of
% attack packet features (header and payload) is determined
% by the exploited weakness. Packets comprising semantic
% and some brute-force attacks must specify some valid header
% fields and possibly some valid contents. For example TCP
% SYN attack packets cannot vary the protocol or flag field,
% and HTTP flood packets must belong to an established TCP
% connection and therefore cannot spoof source addresses. On
% the other hand, attacks aiming simply to consume the victim’s
% network resources could vary packet features at will,
% which greatly hinders the defense.

\subsection{Reflexia a zosilnenie}
% A reflector is any IP host that will return a packet if sent a packet. Attackers
% orchestrate the hosts under their control to send the spoofed traffic purportedly
% coming from the victim to reflectors. The result is that the flood at the
% victim arrives from a significantly higher number of sources, an exceedingly diffuse
% flood likely clogging every single path to the victim from the rest of the internet.

---

DR-DOS - diagram

---

% Amplification: An amplification attack is a type of the reflection attack in which
% reflectors’ responses are larger than queries. Therefore the volume of the attack
% traffic from the source to the victim is multiplied .

\subsection{HTTP POST DoS utoky}
% First discovered in 2009, the HTTP POST attack sends a complete, legitimate HTTP POST header, which includes a 'Content-Length' field to specify the size of the message body to follow. However, the attacker then proceeds to send the actual message body at an extremely slow rate (e.g. 1 byte/110 seconds). Due to the entire message being correct and complete, the target server will attempt to obey the 'Content-Length' field in the header, and wait for the entire body of the message to be transmitted, which can take a very long time. The attacker establishes hundreds or even thousands of such connections, until all resources for incoming connections on the server (the victim) are used up, hence making any further (including legitimate) connections impossible until all data has been sent. It is notable that unlike many other (D)DoS attacks, which try to subdue the server by overloading its network or CPU, a HTTP POST attack targets the logical resources of the victim, which means the victim would still have enough network bandwidth and processing power to operate. Further combined with the fact that Apache will, by default, accept requests up to 2GB in size, this attack can be particularly powerful. HTTP POST attacks are difficult to differentiate from legitimate connections, and are therefore able to bypass some protection systems. OWASP, an open source web application security project, has released a testing tool to test the security of servers against this type of attacks.

\subsection{DoS nastroje a DoS as a Service}
% In cases such as MyDoom the tools are embedded in malware, and launch their attacks without the knowledge of the system owner. Stacheldraht is a classic example of a DDoS tool. It utilizes a layered structure where the attacker uses a client program to connect to handlers, which are compromised systems that issue commands to the zombie agents, which in turn facilitate the DDoS attack. Agents are compromised via the handlers by the attacker, using automated routines to exploit vulnerabilities in programs that accept remote connections running on the targeted remote hosts. Each handler can control up to a thousand agents.

% In other cases a machine may become part of a DDoS attack with the owner's consent, for example, in Operation Payback, organized by the group Anonymous. The LOIC has typically been used in this way. Along with HOIC a wide variety of DDoS tools are available today, including paid and free versions, with different features available. There is an underground market for these in hacker related forums and IRC channels.

% UK's GCHQ has tools built for DDoS, named PREDATORS FACE and ROLLING THUNDER.

% Some vendors provide so-called "booter" or "stresser" services, which have simple web-based front ends, and accept payment over the web. Marketed and promoted as stress-testing tools, they can be used to perform unauthorized denial-of-service attacks, and allow technically unsophisticated attackers access to sophisticated attack tools without the need for the attacker to understand their use.

\chapter{Existujúce prístupy k identifikácií}
\label{ch:existing}
//TODO - Úvod
\section{Využitie sieťovej vrstvy}
//TODO - Úvod
\subsection{Internet Protocol (IP)}
\subsection{Nedostatky}
\section{Aplikačné identifikátory}

\chapter{Tvorba unikátneho identifikátoru}
\label{ch:footprint}
//TODO - Úvod
\section{Možnosti protokolu HTTP}
\section{Možnosti TCP}
\section{Popis Algoritmu}

\section{Záver}

\makeatletter\thesis@blocks@clear\makeatother
\phantomsection %% Print the index and insert it into the
\addcontentsline{toc}{chapter}{\indexname} %% table of contents.
\printindex

\appendix %% Start the appendices.
\chapter{Príloha}
Here you can insert the appendices of your thesis.

\end{document}
